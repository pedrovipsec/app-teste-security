import{d as w,k as S,am as K,an as U,o as n,f as d,j as T,a as l,b as e,F as j,q as L,c as y,p as u,g as a,m as H,t as v,s as V,az as R,ac as N,h as O,n as b,ah as $,ai as k,ap as E,z as J,bq as F,w as W,x as Y,aY as Z,G as X,bZ as Q,ay as P,C as ee,D as te,_ as se,aq as le}from"./index-B-Wkf0n4.js";import{r as z}from"./SearchIcon-B-TcFdTR.js";import{c as A,a as B}from"./handle-string-DtEbiCTK.js";import{r as G}from"./ChevronDownIcon-D9-8SqpD.js";import{_ as M}from"./AppCard.vue_vue_type_script_setup_true_lang-Ydeva4hB.js";import{A as q}from"./AppAvatar-BdJv6vRT.js";import{p as ae}from"./placeholder-CbtG6dxk.js";import{r as oe}from"./CogIcon-CCbL_t32.js";/* empty css                                                                     */import"./RegisterClientSidebar.vue_vue_type_style_index_0_scoped_61ef26e9_lang-B0nnXGfK.js";import{_}from"./Skeleton.vue_vue_type_script_setup_true_lang-B5fxSglI.js";import"./vee-validate-zod.esm--Fzx1q_g.js";const ne={key:0},ie=w({__name:"AppImg",props:{delay:{}},setup(m){const i=m,r=S(!1);return K(()=>{U(()=>{setTimeout(()=>{r.value=!0},i.delay*1e3)})}),(t,p)=>r.value?(n(),d("img",ne)):T("",!0)}}),re={class:"px-4 sm:px-6 grid grid-cols-1 gap-y-8"},ce={class:"flex p-5 gap-x-4 justify-between"},pe={class:"flex flex-wrap"},de=a("div",{class:"w-full"},null,-1),ue={class:"flex ml-[72px] -mt-7 gap-x-5"},me={class:"lg:flex gap-2 hidden"},_e=w({__name:"SkeletonClient",props:{total:{}},setup(m){return(i,r)=>(n(),d("div",re,[l(e(_),{class:"w-3/5 mx-auto h-[40px] mt-2 mb-3"}),l(e(_),{class:"w-full h-[40px]"}),(n(!0),d(j,null,L(i.total,t=>(n(),y(e(M),{key:t},{default:u(()=>[a("div",ce,[a("div",pe,[l(e(_),{class:"w-14 h-14 rounded-full"}),l(e(_),{class:"w-28 h-4 mt-1 ml-4"}),de,a("div",ue,[l(e(_),{class:"hidden w-36 h-4 mt-2 lg:block"}),l(e(_),{class:"hidden w-28 h-4 mt-2 md:block"}),l(e(_),{class:"w-28 h-4 mt-2"})])]),a("div",me,[l(e(_),{class:"w-10 h-10 mt-2"}),l(e(_),{class:"w-20 h-10 mt-2"})])])]),_:2},1024))),128))]))}}),fe={class:"w-full flex-col"},he={class:"sm:text-[17px] text-base"},ve={class:"flex flex-wrap sm:gap-4 gap-1 text-[#6B7280] text-sm mt-1"},xe=a("p",{class:"hidden sm:block max-h-full my-[1px] border-l-[1px] border-[#6B7280]/60"},null,-1),ge=a("p",{class:"hidden sm:block max-h-full my-[1px] border-l-[1px] border-[#6B7280]/60"},null,-1),ye={class:"flex gap-2"},we=w({__name:"HeaderGroupClient",props:{showToggleExpand:{type:Boolean},isExpand:{type:Boolean},client:{}},emits:["toggleExpand"],setup(m){const i=H(),r=t=>{i.setSelectedClient(t),$(k.CLICK_CHOOSE_CLIENT)};return(t,p)=>(n(),d("div",{onClick:p[2]||(p[2]=x=>t.showToggleExpand&&t.$emit("toggleExpand")),class:b(["bg-[#F9FAFB] sm:px-6 px-2 sm:h-[100px] h-[140px] flex items-center gap-4 border-1",[t.showToggleExpand&&"cursor-pointer",t.isExpand?"border-b ":"transition-[border] delay-[0.2s]"]])},[l(e(q),{size:"lg",name:t.client.name,src:t.client.image},null,8,["name","src"]),a("div",fe,[a("p",he,v(t.client.name),1),a("div",ve,[a("p",null,v(t.client.cnpj),1),xe,a("p",null,v(t.client.total_solicitations)+" solicitações",1),ge,a("p",null,v(t.client.total_policies)+" apólices",1)])]),a("div",ye,[l(e(N),{onClick:p[0]||(p[0]=V(x=>e($)(e(k).CLICK_CLIENT_SETTINGS,{origin:"select_client"}),["stop"])),tag:"RouterLink",to:{name:e(R).BROKER_CLIENT_CONFIG_SUBCLIENTS,params:{slug:t.client.slug}},variant:"white",class:"font-medium text-sm peer !px-2 group/item"},{default:u(()=>[l(e(oe),{class:"h-5 w-5 group-hover/item:rotate-[35deg] transition-transform duration-400"})]),_:1},8,["to"]),l(e(N),{tag:"RouterLink",to:{name:e(R).DASHBOARD,params:{clientSlug:t.client.slug}},onClick:p[1]||(p[1]=V(x=>r(t.client),["stop"])),variant:"white",class:"font-medium text-sm peer px-4"},{default:u(()=>[O(" Acessar ")]),_:1},8,["to"])])],2))}}),Ce={class:"relative group/card"},be={class:"w-[75px] max-h-24 flex justify-center"},Ee={class:"text-sm w-full"},$e={class:"text-[#6B7280] text-sm w-60 whitespace-nowrap text-end"},ke=w({__name:"GroupClientCard",props:{client:{},search:{}},setup(m){const i=m,r=S(!1),t=S(!1),p=()=>{r.value=!r.value,r.value||(t.value=!1)},x=s=>{t.value||$(k.CLICK_SEE_MORE_GROUP_COMPANIES,{client_id:s.id,client_name:s.name}),t.value=!t.value},g=E(()=>i.client.policy_holders.find(s=>A(s.cnpj,i.search)||B(s.name,i.search))),C=E(()=>i.client.policy_holders.length>0),h=E(()=>{const s={list:[...i.client.policy_holders],slice:3};return i.search!==""&&g.value&&(s.list=i.client.policy_holders.filter(o=>o.name!==g.value?.name),s.list.unshift(g.value),s.slice=1),{policyHolders:r.value?t.value?s.list:s.list.slice(0,s.slice):s.list.slice(s.list.length),total:s.list.length}});return J(()=>i.search,()=>{i.search===""?r.value=!1:r.value=g.value!==void 0},{immediate:!0}),(s,o)=>(n(),d("div",Ce,[l(e(M),{class:"sm:!rounded-md overflow-hidden z-10 relative"},{default:u(()=>[l(F,{tag:"ul",name:"list-grow"},{default:u(()=>[(n(),y(e(we),{key:"group-key",client:s.client,onToggleExpand:o[0]||(o[0]=c=>p()),showToggleExpand:C.value,isExpand:r.value},null,8,["client","showToggleExpand","isExpand"])),(n(!0),d(j,null,L(h.value.policyHolders,(c,f)=>(n(),d("div",{key:c.slug,class:b([f>0&&"border-t","flex items-center px-8 gap-7 h-[68px] list-grow-item"])},[a("div",be,[c.image?(n(),y(e(ie),{key:0,class:"max-w-[55px] w-full h-auto",src:c.image?c.image:e(ae),delay:.3,draggable:"false"},null,8,["src"])):(n(),y(e(q),{key:1,size:"md",src:c.image,name:c.name,delay:.3},null,8,["src","name"]))]),a("p",Ee,v(c.name),1),a("p",$e,v(c.cnpj),1)],2))),128)),W((n(),d("div",{key:"expand-list",onClick:o[1]||(o[1]=c=>x(s.client)),class:"flex border-t items-center justify-center cursor-pointer h-[56px] leave"},[l(e(N),{class:"text-sm",variant:"link"},{default:u(()=>[O(v(t.value?"Ver menos":"Ver mais"),1),l(e(G),{class:b([t.value&&"rotate-180","h-4 w-4 ml-2"])},null,8,["class"])]),_:1})])),[[Y,r.value&&h.value.total>=(s.search===""?3:2)]])]),_:1})]),_:1}),C.value?(n(),d("div",{key:0,class:b([r.value?"opacity-0 bottom-1/2 delay-[0ms] ":"!hover:delay-300","flex w-full px-1 justify-start absolute z-0 bottom-0 opacity-0 group-hover/card:translate-y-[18px] group-hover/card:opacity-100 transition-all !hover:delay-[150ms]"])},[a("div",{onClick:o[2]||(o[2]=c=>p()),class:"bg-white rounded-b-md w-full cursor-pointer hover:translate-y-[4px] delay-75 transition-all shadow px-6 pb-1 pt-4 flex justify-center text-primary font-medium text-xs ring-1 ring-black ring-opacity-5"},[l(e(G),{class:b([t.value&&"rotate-180","h-4 w-4"])},null,8,["class"])])],2)):T("",!0)]))}}),I=m=>(ee("data-v-b210a9be"),m=m(),te(),m),Se={class:"mt-16 block w-full max-w-6xl relative"},Te=I(()=>a("p",{class:"text-center text-gray-600 text-xl sm:text-3xl"}," Escolha qual tomador você deseja gerenciar ",-1)),Ie={class:"w-full mt-10"},Ne={key:0,class:"top-40 text-lg text-gray-500 text-center flex flex-col justify-center items-center absolute w-full"},Ae={class:"bg-gray-200 flex p-4 rounded-md"},Be=I(()=>a("p",{class:"font-medium text-xl text-gray-800 my-5"}," Nenhum resultado encontrado ",-1)),je=I(()=>a("p",{class:"text-base"}," Parece que não há empresas com este nome ou CNPJ. ",-1)),Le=I(()=>a("p",{class:"text-base"},"Tente novamente ou cadastre uma nova empresa.",-1)),Ve=w({__name:"ClientSelect",async setup(m){let i,r;const t=H(),p=S("");[i,r]=Z(()=>t.fetchClients()),await i,r();const x=s=>s.map(({policy_holders:o,...c})=>({policy_holders:o.filter(D=>D.slug!==c.slug),...c})),g=(s,o)=>B(s.name,o)||A(s.cnpj||"",o)||s.policy_holders.some(c=>B(c.name,o)||A(c.cnpj,o)),C=E(()=>x(t.getAllClients)),h=E(()=>p.value===""?C.value:C.value.filter(s=>g(s,p.value.trim())));return(s,o)=>{const c=X("RouterView");return n(),d("div",Se,[Te,a("div",Ie,[l(e(Q),{modelValue:p.value,"onUpdate:modelValue":o[0]||(o[0]=f=>p.value=f),onBlur:o[1]||(o[1]=f=>p.value!==""&&e($)(e(k).SEARCH_CLIENT,{search:p.value,results:h.value.length})),name:"busca",size:"sm",inputType:"text",placeholder:"Buscar CNPJ ou Razão Social"},{"icon-left":u(()=>[l(e(z),{class:"h-5"})]),_:1},8,["modelValue"])]),h.value.length>0?(n(),y(F,{key:0,tag:"ul",name:"drop-list",class:"relative"},{default:u(()=>[(n(!0),d(j,null,L(h.value,f=>(n(),d("div",{class:"mt-8 item-drop-list flex flex-col",key:f.id},[l(e(ke),{client:f,search:p.value.trim()},null,8,["client","search"])]))),128))]),_:1})):T("",!0),l(P,{name:"fade"},{default:u(()=>[h.value.length===0?(n(),d("div",Ne,[a("div",Ae,[l(e(z),{class:"h-8 text-gray-600"})]),Be,je,Le])):T("",!0)]),_:1}),l(c)])}}}),Re=se(Ve,[["__scopeId","data-v-b210a9be"]]),ze={class:"mt-navbar w-full flex justify-center px-4 pb-20 min-h-full"},Ge={class:"mt-navbar w-full"},Ze=w({__name:"SelectClientView",setup(m){return $(k.VIEW_PAGE_SELECT_CLIENT),(i,r)=>(n(),d("div",null,[a("div",ze,[(n(),y(le,null,{fallback:u(()=>[a("div",Ge,[l(e(_e),{total:4})])]),default:u(()=>[l(P,{name:"slide-up",appear:""},{default:u(()=>[l(e(Re))]),_:1})]),_:1}))])]))}});export{Ze as default};
