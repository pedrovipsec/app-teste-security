import{o as f,c as w,a,d as k,f as x,r as z,n as B,b as e,bn as L,k as p,z as S,p as t,h as v,cs as U,g as h,d9 as V,da as j,ac as y,_ as H}from"./index-B-Wkf0n4.js";import{_ as N,a as E,b as M,c as D,d as O}from"./DialogContent.vue_vue_type_script_setup_true_lang-BWKHsfd4.js";function T(c,o){return f(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z","clip-rule":"evenodd"})])}function W(c,o){return f(),w("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[a("path",{"fill-rule":"evenodd",d:"M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule":"evenodd"})])}const F=k({__name:"DialogFooter",props:{class:{}},setup(c){const o=c;return(d,r)=>(f(),x("div",{class:B(e(L)("flex flex-col space-y-2 sm:space-y-0 mt-1.5 sm:flex-row sm:justify-end sm:space-x-2",o.class))},[z(d.$slots,"default")],2))}}),K={class:"w-full flex justify-center py-3"},q={class:"flex gap-4 mt-2 text-center justify-between"},A=k({__name:"ImageCropper",props:{active:{type:Boolean}},emits:["update:active","update-image"],setup(c,{emit:o}){const d=c,r=o,m=p(!1),i=p({src:"",type:""}),_=p(),u=p(),g=p(0);S(()=>d.active,()=>{d.active&&u.value?u.value.click():(g.value=g.value+1,m.value=!1)});const b=()=>{if(_.value){const{canvas:s}=_.value.getResult();s&&(r("update-image",{filename:"logo.png",file_data:s.toDataURL("png"),content_type:"image/x-png"}),r("update:active",!1))}},C=s=>{const l=s.target===document?s.target.documentElement:s.target,{files:n}=l;if(n&&n[0]){i.value.src&&URL.revokeObjectURL(i.value.src);const I=URL.createObjectURL(n[0]);i.value={src:I,type:n[0].type},m.value=!0}},R=()=>{document.body.onfocus=$};async function $(){setTimeout(()=>{u.value?.files?.length===0&&r("update:active",!1)},700),document.body.onfocus=null}return(s,l)=>(f(),x("div",null,[a(e(O),{open:s.active&&m.value,"onUpdate:open":l[2]||(l[2]=()=>{r("update:active",!1),i.value={src:"",type:""},m.value=!1})},{default:t(()=>[a(e(N),{class:"sm:max-w-[450px]"},{default:t(()=>[a(e(E),null,{default:t(()=>[a(e(M),null,{default:t(()=>[v("Salvar imagem")]),_:1}),a(e(U),{"as-child":""},{default:t(()=>[a(e(D),null,{default:t(()=>[v(" Salvar imagem do tomador ")]),_:1})]),_:1})]),_:1}),h("div",K,[a(e(V),{ref_key:"cropperRef",ref:_,class:"cropper max-w-[400px] rounded-lg",backgroundClass:"bg-primary","stencil-props":{aspectRatio:10/14},canvas:{minHeight:150,minWidth:150,maxHeight:150,maxWidth:150},src:i.value.src,"stencil-component":e(j)},null,8,["src","stencil-component"])]),a(e(F),null,{default:t(()=>[h("div",q,[a(e(y),{class:"button",variant:"white",onClick:l[0]||(l[0]=n=>u.value?.click())},{default:t(()=>[a(e(T),{class:"h-5 w-5 mr-1"}),v(" Selecionar ")]),_:1}),a(e(y),{onClick:l[1]||(l[1]=n=>b())},{default:t(()=>[a(e(W),{class:"h-5 w-5 mr-1"}),v(" Enviar ")]),_:1})])]),_:1})]),_:1})]),_:1},8,["open"]),(f(),x("input",{key:g.value,type:"file",class:"hidden",ref_key:"fileRef",ref:u,accept:"image/*",onChange:C,onClick:R},null,32))]))}}),P=H(A,[["__scopeId","data-v-32291e95"]]);export{P as I,F as _,T as r};
